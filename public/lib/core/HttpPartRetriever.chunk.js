/** Notice * This file contains works from many authors under various (but compatible) licenses. Please see core.txt for more information. **/
(function(){(window.wpCoreControlsBundle=window.wpCoreControlsBundle||[]).push([[0],{555:function(xa,ta,n){n.r(ta);n.d(ta,"ByteRangeRequest",function(){return w});var qa=n(0),na=n(1);n.n(na);var oa=n(3),ia=n(186);xa=n(116);var ka=n(311),ha=n(86),z=n(91),aa=n(310),r=n(205);n=n(476);var h=[],e=[],a=window,b=function(){return function(){this.np=1}}(),f;(function(y){y[y.UNSENT=0]="UNSENT";y[y.DONE=4]="DONE"})(f||(f={}));var w=function(){function y(ba,x,fa,ca){var ma=this;this.url=ba;this.range=x;this.zg=fa;this.withCredentials=
ca;this.Vea=f;this.request=new XMLHttpRequest;this.request.open("GET",this.url,!0);a.Uint8Array&&(this.request.responseType="arraybuffer");ca&&(this.request.withCredentials=ca);ea.DISABLE_RANGE_HEADER||(Object(na.isUndefined)(x.stop)?this.request.setRequestHeader("Range","bytes="+x.start):this.request.setRequestHeader("Range",["bytes=",x.start,"-",x.stop-1].join("")));fa&&Object.keys(fa).forEach(function(la){ma.request.setRequestHeader(la,fa[la])});this.request.overrideMimeType?this.request.overrideMimeType("text/plain; charset=x-user-defined"):
this.request.setRequestHeader("Accept-Charset","x-user-defined");this.status=aa.a.NOT_STARTED}y.prototype.start=function(ba){var x=this,fa=this.request;fa.onreadystatechange=function(){if(x.aborted)return x.status=aa.a.ABORTED,ba({code:aa.a.ABORTED});if(this.readyState===x.Vea.DONE){x.vI();var ca=0===window.document.URL.indexOf("file:///");200===fa.status||206===fa.status||ca&&0===fa.status?(ca=a.I3(this),x.NV(ca,ba)):(x.status=aa.a.ERROR,ba({code:x.status,status:x.status}))}};this.request.send(null);
this.status=aa.a.STARTED};y.prototype.NV=function(ba,x){this.status=aa.a.SUCCESS;if(x)return x(!1,ba)};y.prototype.abort=function(){this.vI();this.aborted=!0;this.request.abort()};y.prototype.vI=function(){var ba=Object(r.c)(this.url,this.range,e);-1!==ba&&e.splice(ba,1);if(0<h.length){ba=h.shift();var x=new y(ba.url,ba.range,this.zg,this.withCredentials);ba.request=x;e.push(ba);x.start(Object(r.d)(ba))}};y.prototype.extend=function(ba){var x=Object.assign({},this,ba.prototype);x.constructor=ba;return x};
return y}(),ea=function(y){function ba(x,fa,ca,ma,la){ca=y.call(this,x,ca,ma)||this;ca.ll={};ca.CG=fa;ca.url=x;ca.DISABLE_RANGE_HEADER=!1;ca.aD=w;ca.bX=3;ca.zg=la||{};return ca}Object(qa.c)(ba,y);ba.prototype.nA=function(x,fa,ca){var ma=-1===x.indexOf("?")?"?":"&";switch(ca){case !1:case z.a.NEVER_CACHE:x=x+ma+"_="+Object(na.uniqueId)();break;case !0:case z.a.CACHE:x=x+ma+"_="+fa.start+","+(Object(na.isUndefined)(fa.stop)?"":fa.stop)}return x};ba.prototype.S0=function(x,fa,ca,ma){void 0===ca&&(ca=
{});return new this.aD(x,fa,ca,ma)};ba.prototype.Poa=function(x,fa,ca,ma,la){for(var ja=0;ja<h.length;ja++)if(Object(na.isEqual)(h[ja].range,fa)&&Object(na.isEqual)(h[ja].url,x))return h[ja].ri.push(ma),h[ja].MJ++,null;for(ja=0;ja<e.length;ja++)if(Object(na.isEqual)(e[ja].range,fa)&&Object(na.isEqual)(e[ja].url,x))return e[ja].ri.push(ma),e[ja].MJ++,null;ca={url:x,range:fa,CG:ca,ri:[ma],MJ:1};if(0===h.length&&e.length<this.bX)return e.push(ca),ca.request=this.S0(x,fa,la,this.withCredentials),ca;h.push(ca);
return null};ba.prototype.mr=function(x,fa,ca){var ma=this.nA(x,fa,this.CG);(x=this.Poa(ma,fa,this.CG,ca,this.zg))&&x.request.start(Object(r.d)(x));return function(){var la=Object(r.c)(ma,fa,e);if(-1!==la){var ja=--e[la].MJ;0===ja&&e[la].request&&e[la].request.abort()}else la=Object(r.c)(ma,fa,h),-1!==la&&(ja=--h[la].MJ,0===ja&&h.splice(la,1))}};ba.prototype.a3=function(){return{start:-ia.a}};ba.prototype.ota=function(){var x=-(ia.a+ia.e);return{start:x-ia.d,end:x}};ba.prototype.kx=function(x){var fa=
this;this.LG=!0;var ca=ia.a;this.mr(this.url,this.a3(),function(ma,la,ja){function ra(){var pa=fa.Be.X2();fa.mr(fa.url,pa,function(sa,ua){if(sa)return Object(oa.j)("Error loading central directory: "+sa),x(sa);ua=Object(ha.a)(ua);if(ua.length!==pa.stop-pa.start)return x("Invalid XOD file: Zip central directory data is wrong size! Should be "+(pa.stop-pa.start)+" but is "+ua.length);fa.Be.u8(ua);fa.EO=!0;fa.LG=!1;return x(!1)})}if(ma)return Object(oa.j)("Error loading end header: "+ma),x(ma,la,ja);
la=Object(ha.a)(la);if(la.length!==ca)return x("Invalid XOD file: Zip end header data is wrong size!");try{fa.Be=new ka.a(la)}catch(pa){return x(pa)}fa.Be.Dva?fa.mr(fa.url,fa.ota(),function(pa,sa){if(pa)return Object(oa.j)("Error loading zip64 header: "+pa),x(pa);sa=Object(ha.a)(sa);fa.Be.dwa(sa);ra()}):ra()})};ba.prototype.C3=function(x){x(Object.keys(this.Be.Kq))};ba.prototype.TT=function(x,fa){var ca=this;if(this.Be.E0(x)){var ma=this.Be.dB(x);if(ma in this.ll){var la=this.Oi[x];la.Mv=this.ll[ma];
la.Mv.np++;la.cancel=la.Mv.cancel}else{var ja=this.Be.hra(x),ra=this.mr(this.url,ja,function(sa,ua){sa?(Object(oa.j)('Error loading part "'+x+'": '+sa),ca.mr(ca.url,ja,function(wa,Ea){if(wa)return fa(wa,x);ca.y8(Ea,ja,ma,x,fa)})):ca.y8(ua,ja,ma,x,fa)}),pa=this.Oi[x];pa&&(pa.qaa=!0,pa.cancel=function(){pa.Mv.np--;0===pa.Mv.np&&(ra(),delete ca.ll[ma])},this.ll[ma]=new b(ma),pa.Mv=this.ll[ma],pa.Mv.cancel=pa.cancel)}}else delete this.Oi[x],fa(Error('File not found: "'+x+'"'),x)};ba.prototype.y8=function(x,
fa,ca,ma,la){if(x.length!==fa.stop-fa.start)la(Error("Part data is wrong size!"),ma);else{do{if(!this.ll[ca])return;ma=this.ll[ca].np;for(var ja=fa.ju.length,ra=0;ra<ja;++ra){var pa=fa.ju[ra];la(!1,pa.gu,x["string"===typeof x?"substring":"subarray"](pa.start,pa.stop),this.Be.Z4(pa.gu));pa.gu in this.Oi&&delete this.Oi[pa.gu]}}while(ma!==this.ll[ca].np);delete this.ll[ca]}};ba.DISABLE_RANGE_HEADER=!1;ba.bX=3;return ba}(xa.a);(function(y){function ba(x,fa,ca){var ma=y.call(this)||this,la;for(la in x)ma[la]=
x[la];ma.OJa=x;ma.startOffset=fa;ma.endOffset=ca;ma.S0=function(ja,ra,pa,sa){Object(na.isUndefined)(ra.stop)?(ra.start+=ma.endOffset,ra.stop=ma.endOffset):(ra.start+=ma.startOffset,ra.stop+=ma.startOffset);ja=ma.nA(ma.url,ra,ma.CG);return new x.aD(ja,ra,pa,sa)};return ma}Object(qa.c)(ba,y);return ba})(ea);Object(n.a)(ea);Object(n.b)(ea);ta["default"]=ea}}]);}).call(this || window)
